<!DOCTYPE html>
<html>
<head>
    <title>Write Notes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            Medical Notes
        </div>
        <div class="card-body">

            <form id="notesForm">
                <textarea name="notes" class="form-control mb-2" placeholder="Notes" required></textarea>
                <textarea name="prescription" class="form-control mb-2" placeholder="Prescription"></textarea>
                <textarea name="follow_up" class="form-control mb-2" placeholder="Follow up"></textarea>

                <button class="btn btn-success">Save</button>
                <span id="msg" class="ms-2"></span>
            </form>

        </div>
    </div>
</div>

<script>
document.getElementById("notesForm").addEventListener("submit", function(e){
    e.preventDefault();

    fetch("{% url 'save_notes' appointment.id %}", {
        method: "POST",
        body: new FormData(this)
    })
    .then(res => res.json())
    .then(data => {
        document.getElementById("msg").innerHTML =
            `<span class="text-success">${data.message}</span>`;
    });
});
</script>

</body>
</html>
